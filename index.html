<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAMADAN INCENTIVE CALCULATOR</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #333; }
        select, input { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 12px 25px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .result { margin-top: 25px; padding: 20px; background-color: #f8f9fa; border-radius: 4px; }
        .admin-section { display: none; border: 2px solid #4CAF50; padding: 20px; margin-bottom: 20px; }
        input[readonly] { background-color: #f8f9fa !important; }
    </style>
</head>
<body>
    <h2 style="color: #2c3e50; border-bottom: 2px solid #4CAF50; padding-bottom: 10px;">
        RAMADAN INCENTIVE CALCULATOR
    </h2>

    <!-- Admin Login -->
    <div class="input-group">
        <button onclick="toggleAdminLogin()">Admin Login</button>
        <div id="adminLogin" style="display:none; margin-top:10px;">
            <input type="password" id="adminPassword" placeholder="Enter Admin Password">
            <button onclick="verifyAdmin()">Authenticate</button>
        </div>
    </div>

    <!-- Admin Section -->
    <div class="admin-section" id="adminSection">
        <h3>Admin Panel</h3>
        <div class="input-group">
            <label for="excelUpload">Upload Employee Data (Excel):</label>
            <input type="file" id="excelUpload" accept=".xlsx, .xls">
            <button onclick="uploadExcelToGitHub()">Upload to GitHub</button>
        </div>
    </div>

    <script>
        const ADMIN_PASSWORD = "admin123"; // Change if needed

        function toggleAdminLogin() {
            document.getElementById('adminLogin').style.display = 'block';
        }

        function verifyAdmin() {
            if (document.getElementById('adminPassword').value === ADMIN_PASSWORD) {
                document.getElementById('adminSection').style.display = 'block';
                alert("Admin access granted!");
            } else {
                alert("Invalid password!");
            }
        }

        async function uploadExcelToGitHub() {
            const fileInput = document.getElementById('excelUpload');
            if (fileInput.files.length === 0) {
                alert("Please select a file.");
                return;
            }

            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = async function (event) {
                const fileData = event.target.result;
                const base64Data = btoa(fileData); // Convert to Base64

                const githubApiUrl = "https://api.github.com/repos/**your-username/your-repository**/contents/**your-file.xlsx**"; // Change Here
                const token = "*your-personal-access-token*"; // Change Here

                const response = await fetch(githubApiUrl, {
                    method: "PUT",
                    headers: {
                        "Authorization": token ${token},
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        message: "Upload Excel file",
                        content: base64Data
                    })
                });

                if (response.ok) {
                    alert("File uploaded successfully!");
                } else {
                    alert("Error uploading file!");
                }
            };

            reader.readAsBinaryString(file);
        }
    </script>
</body>
</html>
